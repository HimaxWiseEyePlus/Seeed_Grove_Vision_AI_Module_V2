# Platform root declaration for Wildlife Watcher Apps
SCENARIO_APP_ROOT = $(EPII_ROOT)/app/ww_projects
# Also adjust the name of this library:
#LIB_SCENARIO_APP= $(OUT_DIR)/libscenario_app.a
LIB_SCENARIO_APP= $(OUT_DIR)/libww_projects.a

# I Moved the definition of APP_TYPE from makefile to ww.mk
# Uncomment one project to compile:
#APP_TYPE = i2c_slave_app
APP_TYPE = ww130_test
#APP_TYPE = ww_template
#APP_TYPE = ww130_cli

SCENARIO_APP_MKS =
SCENARIO_APP_MKS += $(foreach APP_TYPE_MK, $(APP_TYPE), $(wildcard $(SCENARIO_APP_ROOT)/$(APP_TYPE_MK)/*.mk))
include $(wildcard $(SCENARIO_APP_MKS))
# cli_global_cmd
SCENARIO_APP_REQUIRED = 

SCENARIO_APP_INCDIR = $(SCENARIO_APP_ROOT)

SCENARIO_APP_CSRCDIR = 
SCENARIO_APP_CXXSRCDIR = 
SCENARIO_APP_CCSRCDIR = 
SCENARIO_APP_ASMSRCDIR = 

SCENARIO_APP_CSRCS =  
SCENARIO_APP_CXXSRCS =
SCENARIO_APP_CCSRCS =
SCENARIO_APP_ASMSRCS =
SCENARIO_APP_ALLSRCS = 

SCENARIO_APP_COBJS = 
SCENARIO_APP_CXXOBJS =
SCENARIO_APP_CCOBJS =  
SCENARIO_APP_ASMOBJS = 
SCENARIO_APP_ALLOBJS =

SCENARIO_APP_DEFINES =
SCENARIO_APP_DEPS =
SCENARIO_APP_LIBS =

# extra macros to be defined
LIB_SCENARIO_APP_DEFINES = 

ifdef SCENARIO_APP_SUPPORT_LIST
	override SCENARIO_APP_SUPPORT_LIST  := $(sort $(strip $(SCENARIO_APP_REQUIRED) $(SCENARIO_APP_SUPPORT_LIST)))
	SCENARIO_APP_SUPPORT_SORTED = $(sort $(SCENARIO_APP_SUPPORT_LIST))		
	SCENARIO_APP_CSRCDIR += $(foreach SCENARIO_APP_CLI, $(SCENARIO_APP_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_CCSRCDIR += $(foreach SCENARIO_APP_CLI, $(SCENARIO_APP_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_CXXSRCDIR += $(foreach SCENARIO_APP_CLI, $(SCENARIO_APP_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_INCDIR += $(foreach SCENARIO_APP_CLI, $(SCENARIO_APP_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))

ifneq ($(strip $(EVENTHANDLER_SUPPORT)),)		
	SCENARIO_APP_CSRCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_CXXSRCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_CCSRCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_INCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT), $(addprefix $(SCENARIO_APP_ROOT)/, $(SCENARIO_APP_CLI)))

	override EVENTHANDLER_SUPPORT_LIST  := $(sort $(strip $(SCENARIO_APP_REQUIRED) $(EVENTHANDLER_SUPPORT_LIST)))
	EVENTHANDLER_SUPPORT_SORTED = $(sort $(EVENTHANDLER_SUPPORT_LIST))		
	SCENARIO_APP_CSRCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/$(EVENTHANDLER_SUPPORT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_CXXSRCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/$(EVENTHANDLER_SUPPORT)/, $(SCENARIO_APP_CLI)))
	SCENARIO_APP_CCSRCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/$(EVENTHANDLER_SUPPORT)/, $(SCENARIO_APP_CLI)))	
	SCENARIO_APP_INCDIR += $(foreach SCENARIO_APP_CLI, $(EVENTHANDLER_SUPPORT_SORTED), $(addprefix $(SCENARIO_APP_ROOT)/$(EVENTHANDLER_SUPPORT)/, $(SCENARIO_APP_CLI)))
endif

ifneq ($(strip $(CIS_SUPPORT_INAPP)),)	
	SCENARIO_APP_CSRCDIR += $(SCENARIO_APP_ROOT)/$(APP_TYPE)/$(CIS_SUPPORT_INAPP)/$(CIS_SUPPORT_INAPP_MODEL)
	SCENARIO_APP_CXXSRCDIR += $(SCENARIO_APP_ROOT)/$(APP_TYPE)/$(CIS_SUPPORT_INAPP)/$(CIS_SUPPORT_INAPP_MODEL)
	SCENARIO_APP_CCSRCDIR += $(SCENARIO_APP_ROOT)/$(APP_TYPE)/$(CIS_SUPPORT_INAPP)/$(CIS_SUPPORT_INAPP_MODEL)
	SCENARIO_APP_INCDIR += $(SCENARIO_APP_ROOT)/$(APP_TYPE)/$(CIS_SUPPORT_INAPP)/$(CIS_SUPPORT_INAPP_MODEL)
endif

	SCENARIO_APP_CSRCS = $(call get_csrcs, $(SCENARIO_APP_CSRCDIR))
	SCENARIO_APP_CXXSRCS = $(call get_cxxsrcs, $(SCENARIO_APP_CXXSRCDIR))
	SCENARIO_APP_CCSRCS = $(call get_ccsrcs, $(SCENARIO_APP_CCSRCDIR))
	SCENARIO_APP_ASMSRCS = $(call get_asmsrcs, $(SCENARIO_APP_ASMSRCDIR))
ifeq ($(USE_APP_MAIN_MK), y)
	SCENARIO_APP_CSRCS += $(APPL_APP_CSRCS)
	SCENARIO_APP_CCSRCS += $(APPL_APP_CCSRCS)
	SCENARIO_APP_INCDIR += $(APPL_APP_INCDIRS)
	SCENARIO_APP_CSRCS += $(APPL_API_SRCS)
	SCENARIO_APP_CCSRCS += $(APPL_API_CCSRCS)
	SCENARIO_APP_INCDIR += $(APPL_API_INCDIRS)
endif
endif

# CGP added for information and checking
$(info In ww.mk OUT_DIR='${OUT_DIR}')
$(info In ww.mk CIS_SUPPORT_INAPP='${CIS_SUPPORT_INAPP}' SCENARIO_APP_INCDIR='${SCENARIO_APP_INCDIR}')

